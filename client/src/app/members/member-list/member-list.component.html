<div class="row">
  <div class="text-center mt-3">
    <h2>
      Your matches -
      {{ membersService.paginatedResult()?.pagination?.totalItems }}
    </h2>
  </div>

  <div class="container mt-3">
    <form #form="ngForm" class="d-flex mb-3" (ngSubmit)="loadMembers()">
      <div class="d-flex mx-2">
        <label class="col-form-label">Age From: </label>
        <input
          name="minAge"
          type="number"
          class="form-control ms-1"
          style="width: 5rem"
          [(ngModel)]="membersService.userParams().minAge"
        />
      </div>
      <div class="d-flex mx-2">
        <label class="col-form-label">Age To: </label>
        <input
          name="maxAge"
          type="number"
          class="form-control ms-1"
          style="width: 5rem"
          [(ngModel)]="membersService.userParams().maxAge"
        />
      </div>

      <div class="d-flex mx-2">
        <label class="col-form-label">Select Gender: </label>
        <select
          class="form-select mx-1"
          style="width: 7.5rem"
          name="gender"
          [(ngModel)]="membersService.userParams().gender"
        >
          @for(g of genderList; track g.value){
          <option [value]="g.value">
            {{ g.display }}
          </option>
          }
        </select>
      </div>

      <button class="btn btn-primary ms-1" type="submit">Apply Filters</button>
      <button class="btn btn-info ms-2" (click)="resetFilters()" type="button">
        Reset Filters
      </button>

      <div class="col">
        <div class="btn-group float-end">
          <button
            type="button"
            class="btn btn-primary"
            name="orderBy"
            (click)="loadMembers()"
            btnRadio="lastActive"
            style="background-color: rgb(176, 179, 8)"
            [(ngModel)]="membersService.userParams().orderBy"
            [ngClass]="{ 'active': membersService.userParams().orderBy === 'lastActive' }"
          >
            Last Active
          </button>
          <button
            type="button"
            class="btn btn-primary"
            style="background-color: rgb(176, 179, 8)"
            name="orderBy"
            (click)="loadMembers()"
            btnRadio="created"
            [(ngModel)]="membersService.userParams().orderBy"
            [ngClass]="{ 'active': membersService.userParams().orderBy === 'created' }"
          >
            Newest Members
          </button>
        </div>
      </div>
    </form>
  </div>

  @for(member of membersService.paginatedResult()?.items; track member.id){
  <div class="col-3">
    <app-member-card
      [memberInfo]="member"
      style="border-radius: 3px"
    ></app-member-card>
  </div>
  } @if(membersService.paginatedResult()?.pagination){
  <div class="d-flex justify-content-center">
    <pagination
      [boundaryLinks]="true"
      [totalItems]="(membersService.paginatedResult()?.pagination)!.totalItems"
      [itemsPerPage]="
        (membersService.paginatedResult()?.pagination)!.itemsPerPage
      "
      (pageChanged)="pageChanged($event)"
      [maxSize]="5"
      previousText="&lsaquo;"
      nextText="&rsaquo;"
      firstText="&laquo;"
      lastText="&raquo;"
    >
    </pagination>
  </div>
  }
</div>
